# 6章: 経費精算アプリを作る

⏱️ **所要時間**: 実践45分

## 📋 この章の目標

- [ ] これまで学んだスキルを全て使う
- [ ] 業務で使えるレベルのアプリを作る
- [ ] プロンプト設計で最初から高品質に作る

---

## 🎯 今回作るもの

**経費精算アプリ**

副業や業務で実際に使える実用的なアプリです。

### 主な機能
- 経費入力（日付、項目、金額、カテゴリ）
- カテゴリ別集計
- 月次レポート
- CSV出力

### 使用スキル
- ✅ 仕様駆動開発（3章）
- ✅ プロンプト設計の5原則（5章）
- ✅ Claude Codeとの対話（2章）

---

## 🚀 ハンズオン（45分）

### ステップ1: プロジェクト準備（3分）

```bash
# 新しいプロジェクトフォルダを作成
mkdir expense-tracker
cd expense-tracker

# Claude Codeを起動
claude
```

### ステップ2: 仕様書を作成（12分）

`spec.md` を作成します。今回は **詳細に** 書きます。

```markdown
# 経費精算アプリ 仕様書

## 概要
個人事業主・副業者向けの経費管理Webアプリ

## 機能一覧
1. 経費入力
2. 経費一覧表示
3. カテゴリ別集計
4. 月別レポート
5. CSV出力

## 画面構成
シングルページアプリケーション

```
┌─────────────────────────────┐
│ 経費精算アプリ              │
├─────────────────────────────┤
│ [入力フォーム]              │
│ 日付: [____] カテゴリ: [▼] │
│ 項目: [________]            │
│ 金額: [________]円          │
│        [追加]              │
├─────────────────────────────┤
│ [経費一覧]                  │
│ 2025/01/15 交通費 電車代... │
│ 2025/01/14 食費 打ち合わせ...│
├─────────────────────────────┤
│ [集計]                      │
│ 交通費: 5,000円            │
│ 食費: 3,000円              │
└─────────────────────────────┘
```

## 詳細仕様

### 1. 経費入力フォーム

**入力項目**:
- 日付（必須、デフォルト：今日）
- カテゴリ（必須、選択式）
  - 交通費
  - 食費
  - 通信費
  - 消耗品費
  - その他
- 項目（必須、100文字以内）
- 金額（必須、数値のみ、1円以上）

**バリデーション**:
- すべて必須項目
- 金額は正の整数のみ
- 未来の日付は選択不可

**動作**:
- 追加ボタンクリック → 一覧に追加
- フォームをクリア
- 成功メッセージ表示（3秒後に消える）

### 2. 経費一覧

**表示形式**:
```
[削除] 2025/01/15 | 交通費 | 電車代（新宿→渋谷） | ¥500
```

**ソート**:
- デフォルト: 日付の新しい順

**削除機能**:
- 削除ボタンクリック → 確認ダイアログ
- OK → 削除実行
- キャンセル → 何もしない

### 3. カテゴリ別集計

**表示内容**:
```
カテゴリ別集計（今月）
交通費:    ¥15,000 (5件)
食費:      ¥8,000 (3件)
通信費:    ¥12,000 (2件)
消耗品費:  ¥5,000 (2件)
その他:    ¥3,000 (1件)
─────────────────────
合計:      ¥43,000 (13件)
```

**更新タイミング**:
- 経費追加時
- 経費削除時

### 4. 月別フィルター

**UI**:
```
表示期間: [2025年01月 ▼]
```

**動作**:
- 月を選択 → その月の経費のみ表示
- 集計も選択月のみ

### 5. CSV出力

**ボタン**: 「CSVダウンロード」

**出力形式**:
```csv
日付,カテゴリ,項目,金額
2025/01/15,交通費,電車代（新宿→渋谷）,500
2025/01/14,食費,打ち合わせランチ,1200
```

**ファイル名**: `expenses_2025-01.csv`

## 技術要件

### フロントエンド
- HTML5、CSS3、JavaScript（Vanilla JS）
- レスポンシブデザイン（Bootstrap 5使用）
- アイコン: Bootstrap Icons

### データ保存
- localStorage使用
- キー名: `expenses`
- 値: JSON配列

### デザイン
- カラースキーム:
  - プライマリ: #2563eb（青）
  - セカンダリ: #64748b（グレー）
  - 成功: #10b981（緑）
  - 警告: #f59e0b（オレンジ）
  - エラー: #ef4444（赤）

- フォント: システムフォント
- 余白: Bootstrap標準の間隔

### ブラウザ対応
- Chrome 最新版
- Firefox 最新版
- Safari 最新版
- Edge 最新版
```

### ステップ3: プロンプトを準備（5分）

5章で学んだ「5原則」を使ってプロンプトを作成：

```
💬 「spec.mdの仕様に従って、経費精算アプリを作成してください。

【具体性】
- Bootstrap 5を使用してください
- index.html 1ファイルで完結させてください
- localStorageでデータを永続化してください

【制約性】
- jQueryは使用しない（Vanilla JSのみ）
- 外部APIは使用しない（すべてクライアント側で完結）

【検証性】
以下のテストケースで動作確認をお願いします:
1. 経費を5件追加 → 一覧に表示される
2. カテゴリ別集計が正しく計算される
3. 経費を削除 → 集計が更新される
4. CSVをダウンロード → 正しいフォーマットで出力される
5. ページをリロード → データが保持されている」
```

### ステップ4: Claude Codeに依頼（10分）

上記のプロンプトをClaude Codeに送信。

**Claude Codeがやること**:
1. 仕様書を読む
2. Bootstrap 5を使ったHTMLを生成
3. 必要なJavaScriptを実装
4. localStorageの実装
5. CSV出力機能の実装

### ステップ5: 動作確認（10分）

```bash
open index.html
```

**確認項目**:
- [ ] 経費を追加できる
- [ ] カテゴリ別に色分けされている
- [ ] 集計が正しく表示される
- [ ] 削除できる
- [ ] CSVダウンロードできる
- [ ] リロード後もデータが残る

### ステップ6: カスタマイズ（5分）

実際に使ってみて、改善点があれば依頼：

```
💬 「経費一覧を金額の高い順にソートする機能を追加してください」
💬 「合計金額を画面上部に大きく表示してください」
💬 「カテゴリごとに色分けしたグラフを追加してください」
```

---

## 💼 実務での活用

### このアプリをベースに副業案件を受注

**受注例1: カスタマイズ案件**
```
依頼: 「うちの会社用に経費精算アプリをカスタマイズしてほしい」

対応:
- 承認フロー追加
- 会社固有のカテゴリに変更
- PDF出力機能追加
- クライアント専用ブランディング

工数: 10時間
単価: @5,000円
報酬: 50,000円
```

**受注例2: 新規開発案件**
```
依頼: 「経費精算アプリを参考に、在庫管理アプリを作ってほしい」

対応:
- 同じ構成（入力→一覧→集計）
- カテゴリ → 商品カテゴリ
- 金額 → 在庫数
- CSV出力 → 在庫レポート

工数: 15時間
単価: @5,000円
報酬: 75,000円
```

### スキルアップの効果

**このアプリを作ることで身につくスキル**:
- ✅ CRUD操作の実装
- ✅ localStorage活用
- ✅ データ集計ロジック
- ✅ CSV出力処理
- ✅ Bootstrap活用
- ✅ レスポンシブデザイン

**転職市場での価値**:
- 「実用的なアプリを作れる」実績
- ポートフォリオとして提示可能
- 面接での技術説明ネタ

---

## ✅ 完了チェック

この章を終えたら、以下を確認してください：

- [ ] 経費精算アプリが完成した
- [ ] すべての機能が動作している
- [ ] 仕様駆動開発とプロンプト設計を実践できた
- [ ] 実務で使えるレベルのアプリが作れた

**すべてチェックできたら、セッション1完了です！**

---

## 💡 よくある質問

**Q: Bootstrap 5が使えない場合は？**
A: Claude Codeに「CDN経由でBootstrap 5を読み込んでください」と指示すれば自動で設定されます。

**Q: デザインをもっとカスタマイズしたい**
A: 「このデザインを参考にしてください」と画像URLや詳細な説明を添えると、より希望に近いデザインになります。

**Q: localStorageの制限は？**
A: 通常5-10MBまで。経費データ程度なら十分です。何千件も保存する場合は別のDBを検討してください。

---

## 🎉 セッション1完了！

お疲れ様でした！ここまでで以下を学びました：

- ✅ Claude Codeの基本操作（2章）
- ✅ 仕様駆動開発（3-4章）
- ✅ プロンプト設計（5章）
- ✅ 実用アプリ開発（6章）

**次回（セッション2）予告**:
- コードレビュー活用法
- テスト自動生成
- さらなる品質向上テクニック

休憩を取って、次のセッションに進みましょう！
