# 4章: 仕様書でアプリを改善

⏱️ **所要時間**: 実践30分

## 📋 この章の目標

- [ ] 仕様書を実際に書けるようになる
- [ ] 仕様書ベースでClaude Codeに指示できる
- [ ] タスク管理アプリをv2.0にアップグレードする

---

## 🎯 今回やること

2章で作った **タスク管理アプリv1.0** を、仕様書を書いてから **v2.0** にパワーアップさせます。

### v1.0の機能（前回）
- タスク追加
- タスク表示
- タスク削除

### v2.0で追加する機能（今回）
- 優先度設定（高・中・低）
- 期限設定
- 優先度別の色分け表示

---

## 🚀 ハンズオン（30分）

### ステップ1: 仕様書を作成（10分）

`task-manager` フォルダ内に `spec.md` を作成します。

```markdown
# タスク管理アプリ v2.0 仕様書

## 概要
日常のタスクを優先度と期限で管理するシンプルなWebアプリ

## 機能一覧
- タスク追加（優先度・期限付き）
- タスク表示（優先度別に色分け）
- タスク削除
- タスク完了チェック

## 画面構成
メイン画面のみ（1ページ完結）

## 詳細仕様

### タスク追加フォーム
**入力項目**:
1. タスク名（必須、50文字以内）
2. 優先度（高・中・低、デフォルト：中）
3. 期限（任意、日付選択）

**バリデーション**:
- タスク名が空の場合: エラーメッセージ表示「タスク名を入力してください」
- 過去の日付は選択不可

### タスク表示
**表示形式**:
```
[✓] タスク名 [高] 期限: 2025/12/31 [削除]
```

**優先度別の色分け**:
- 高: 赤色のバッジ（背景 #fee, 文字 #c00）
- 中: 黄色のバッジ（背景 #ffe, 文字 #c90）
- 低: 緑色のバッジ（背景 #efe, 文字 #090）

**完了時の表示**:
- タスク名に取り消し線
- 全体をグレーアウト（opacity: 0.5）

### 技術要件
- HTML5、CSS3、JavaScript（Vanilla JS）
- ローカルストレージ対応（ページ更新してもデータが残る）
- レスポンシブデザイン（スマホでも見やすい）
```

### ステップ2: Claude Codeに仕様書を渡す（5分）

2章で作ったプロジェクトフォルダで Claude Code を起動：

```bash
cd task-manager
claude
```

仕様書を渡します：

```
💬 「spec.md の仕様に従って、現在のindex.htmlを改良してください。
優先度設定、期限設定、色分け表示を追加してください。」
```

**Claude Codeがやること**:
- 既存の `index.html` を読む
- 仕様書 `spec.md` を読む
- 仕様に従って機能を追加
- コードを更新

### ステップ3: 動作確認（5分）

ブラウザで `index.html` を開いて確認：

```bash
open index.html
```

**確認ポイント**:
- ✅ 優先度選択ができる（高・中・低）
- ✅ 期限が設定できる（日付選択）
- ✅ 優先度別に色分けされている
- ✅ 完了チェックで取り消し線が表示される

### ステップ4: 仕様を追加してみる（5分）

仕様書 `spec.md` に新しい機能を追加：

```markdown
### フィルター機能
**機能**: 優先度でタスクを絞り込む

**UI**:
```
[全て表示] [高のみ] [中のみ] [低のみ]
```

**動作**:
- ボタンをクリックすると該当する優先度のタスクのみ表示
- 「全て表示」で元に戻る
```

Claude Codeに依頼：

```
💬 「spec.mdに追加したフィルター機能を実装してください」
```

### ステップ5: 振り返り（5分）

**質問してみよう**:

```
💬 「このコードでローカルストレージをどう使っていますか？」
💬 「優先度の色分けはどこで定義されていますか？」
💬 「このコードをもっとシンプルにできますか？」
```

---

## 💡 仕様書のメリットを実感しよう

### ケース1: 仕様書なしで依頼

```
❌ 「タスク管理アプリに優先度を追加して」

結果:
- Claude Codeが勝手に仕様を解釈
- 色分けのルールが曖昧
- 期待と違う実装になる可能性
```

### ケース2: 仕様書ありで依頼

```
✅ 「spec.mdの仕様に従って実装して」

結果:
- 仕様書通りの実装
- 色分けルールも明確
- 期待通りの動作
```

### 副業・業務での効果

**仕様書があることで**:
- ✅ クライアントとの認識ズレを防げる
- ✅ 「これじゃない」という手戻りが減る
- ✅ 追加機能の見積もりが正確になる
- ✅ チームメンバーへの共有が簡単

**収入アップへの影響**:
- 手戻り削減 → 時間短縮 → 時給アップ
- 正確な見積もり → トラブル減少 → 評価向上
- 品質向上 → リピート案件増加

---

## ✅ 完了チェック

この章を終えたら、以下を確認してください：

- [ ] 仕様書を書いた
- [ ] 仕様書ベースでClaude Codeに指示できた
- [ ] タスク管理アプリがv2.0になった
- [ ] 優先度、期限、色分けが動作している

**すべてチェックできたら、5章へ進みましょう！**

---

## 💡 よくある質問

**Q: 仕様書を書くのに時間がかかる**
A: 最初は時間がかかりますが、慣れれば10-15分で書けます。コーディング後の手戻りを考えると結果的に速い。

**Q: 仕様書をどこまで詳しく書くべき？**
A: Claude Codeに伝えたいレベルまで。曖昧な部分があれば Claude Code が勝手に解釈してしまうので注意。

**Q: 仕様書のテンプレートはある？**
A: GitHub で「仕様書 テンプレート」と検索すると色々出てきます。自分に合うものを選んでカスタマイズしましょう。

---

## 🔗 次のステップ

次は **5章: プロンプト設計の技術** で、Claude Codeへの指示をもっと上手に出す方法を学びます！
