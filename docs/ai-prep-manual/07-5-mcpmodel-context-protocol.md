## **5. MCP（Model Context Protocol）完全活用ガイド**

---

### 5.1 MCPとは？

MCP (Model Context Protocol) は、AIモデルがコードベース全体のコンテキストを理解し、より正確で関連性の高い提案やコード生成を行うためのプロトコルです。これにより、AIは単一のファイルだけでなく、プロジェクト全体の構造、依存関係、コーディング規約などを考慮した上で、開発支援を行うことができます。

### 5.2 MCPの仕組みと重要性

MCPは、プロジェクトのメタデータ、ファイル構造、既存のコードスニペット、ドキュメントなどをAIモデルに提供します。これにより、AIは以下のような高度な開発支援が可能になります。

- **コード補完の精度向上**: プロジェクト全体のコンテキストに基づいた、より適切なコード補完。

- **バグ修正の効率化**: 関連するファイルやロジックを考慮したバグの特定と修正提案。

- **新機能開発の加速**: 既存のコードベースに適合する形で、新しい機能を効率的に実装するためのコード生成。

- **リファクタリングの支援**: プロジェクトの品質基準に合わせたリファクタリング提案。

### 5.3 Super ClaudeとMCPの連携

Super Claudeは、MCPをネイティブにサポートしており、プロジェクトのコンテキストを自動的にAIモデルに提供します。これにより、Super Claudeの各コマンド（`implement`, `improve`, `test`など）は、より賢く、よりプロジェクトに即した結果を生成します。

#### ✅ MCPの有効化と設定

Super Claudeでは、通常MCPはデフォルトで有効になっています。プロジェクトルートに`.mcp`ファイルを作成し、AIに提供するコンテキストの範囲や優先順位を定義することで、さらに詳細な制御が可能です。

```json
// .mcpファイル例
{
  "include": [
    "src/**/*.js",
    "src/**/*.ts",
    "docs/**/*.md"
  ],
  "exclude": [
    "node_modules/**",
    "dist/**"
  ],
  "priority": {
    "src/core/**/*.js": 10,
    "src/utils/**/*.js": 5
  }
}
```

- `include`: AIにコンテキストとして含めるファイルのパターン。

- `exclude`: AIにコンテキストとして含めないファイルのパターン。

- `priority`: 特定のファイルのコンテキストの重要度を設定します。値が大きいほど優先されます。

### 5.4 MCPを活用した開発ワークフロー

MCPを最大限に活用することで、Super Claudeの各コマンドがより強力になり、以下のような開発ワークフローを実現できます。

| フェーズ | Super Claudeコマンド | MCPによる恩恵と実践的なヒント |
| --- | --- | --- |
| **プロジェクト初期化** | `sc init` | プロジェクトの初期化時に`.mcp`ファイルを自動生成し、AIがコードベース全体を理解するための土台を築きます。これにより、以降のコマンドがプロジェクトの構造や既存ファイルに即した提案を行えるようになります。 |
| **要件定義** | `sc brainstorm` | 既存のプロジェクトファイルやドキュメントをMCPがAIに提供することで、`brainstorm`はより現実的で、プロジェクトの文脈に合ったアイデアや要件を提案します。例えば、既存のAPI定義を考慮した機能追加のアイデア出しが可能です。 |
| **設計** | `sc design` | `design`コマンドは、MCPが提供する既存のアーキテクチャやデザインパターンを参照し、一貫性のある設計案を生成します。これにより、プロジェクトのスタイルガイドに沿ったUIコンポーネントの設計や、既存のデータベース構造に適合するスキーマ設計が容易になります。 |
| **実装** | `sc implement` | `implement`コマンドは、MCPが提供するコードベースのコンテキスト（コーディング規約、既存の関数、クラスなど）に基づいて、より正確で統合性の高いコードを生成します。例えば、既存のユーティリティ関数を自動的に利用したコードスニペットの生成が可能です。 |
| **レビューと改善** | `sc improve` | `improve`コマンドは、MCPを通じてプロジェクト全体の品質基準やパフォーマンス要件を理解し、コードの改善提案を行います。例えば、特定のモジュールのリファクタリングや、プロジェクト全体で一貫したエラーハンドリングの導入などが提案されます。 |
| **テスト** | `sc test` | `test`コマンドは、MCPが提供する既存のテストフレームワークやテストパターンを考慮し、効果的なテストコードを生成します。これにより、プロジェクトのテストカバレッジを向上させ、バグの早期発見に貢献します。 |

---

