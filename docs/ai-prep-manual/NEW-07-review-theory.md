# 7章: コードレビュー活用法

⏱️ **所要時間**: 座学15分

## 📋 この章の目標

- [ ] AIコードレビューの強みを理解する
- [ ] レビュー依頼の効果的な方法を学ぶ
- [ ] 実務での活用パターンを知る

---

## 🎯 コードレビューとは

**コードレビュー** = 書いたコードを第三者がチェックして改善提案をすること

### 従来のコードレビュー

```
自分が書く → 先輩エンジニアにレビュー依頼 → フィードバック → 修正
```

**問題点**:
- ⏰ レビュー待ち時間が発生
- 😰 指摘されると精神的にキツい
- 💸 先輩の時間を使う（コスト高）

### AIコードレビュー

```
自分が書く → Claude Codeにレビュー依頼 → 即座にフィードバック → 修正
```

**メリット**:
- ⚡ 即座にフィードバック
- 😊 心理的ハードルが低い
- 💰 何度でも無料
- 🌙 24時間いつでも可能

---

## 🤖 AIコードレビューの強み

### 強み1: 網羅的なチェック

人間のレビュー:
- 見落としがある
- 疲労で精度が落ちる
- 得意分野に偏る

AIレビュー:
- ✅ すべてのコードを平等にチェック
- ✅ 疲れない
- ✅ 多角的な視点

### 強み2: 教育的なフィードバック

```
人間のレビュー:
「ここダメ」

AIレビュー:
「ここを改善できます。なぜなら...
こうすることで、パフォーマンスが向上します。
参考: [関連ドキュメント]」
```

### 強み3: 即座の対話

```
レビュー → 質問 → 回答 → 再修正 → 再レビュー

すべてが数分で完結
```

---

## 📝 効果的なレビュー依頼の仕方

### パターン1: 全体レビュー

```
💬 「このコードをレビューしてください。

レビュー観点:
- セキュリティ
- パフォーマンス
- 可読性
- ベストプラクティス準拠」
```

### パターン2: 特定観点レビュー

```
💬 「このコードのセキュリティ面をレビューしてください。
特にXSS脆弱性とSQLインジェクション対策を重点的にチェックしてください」
```

### パターン3: 改善提案

```
💬 「このコードをより読みやすく改善してください。
変数名、関数名、コメントの改善提案をお願いします」
```

### パターン4: パフォーマンス最適化

```
💬 「このコードのパフォーマンスを改善してください。
現在、1000件のデータ処理に5秒かかっています。
もっと高速化できますか？」
```

---

## 🎨 レビューで見るべきポイント

### 1. セキュリティ

```javascript
// ❌ 危険なコード
element.innerHTML = userInput;  // XSS脆弱性

// ✅ 安全なコード
element.textContent = userInput;  // エスケープされる
```

**レビュー依頼**:
```
💬 「このコードにXSS脆弱性はありませんか？」
```

### 2. パフォーマンス

```javascript
// ❌ 非効率
for (let i = 0; i < array.length; i++) {
  // array.lengthが毎回計算される
}

// ✅ 効率的
const len = array.length;
for (let i = 0; i < len; i++) {
  // 1回だけ計算
}
```

**レビュー依頼**:
```
💬 「このループ処理を最適化できますか？」
```

### 3. 可読性

```javascript
// ❌ 読みにくい
function f(a,b){return a>b?a:b}

// ✅ 読みやすい
function getMaxValue(valueA, valueB) {
  return valueA > valueB ? valueA : valueB;
}
```

**レビュー依頼**:
```
💬 「このコードをもっと読みやすくしてください」
```

### 4. エラーハンドリング

```javascript
// ❌ エラー処理なし
const data = JSON.parse(userInput);

// ✅ エラー処理あり
try {
  const data = JSON.parse(userInput);
} catch (error) {
  console.error('JSONパースエラー:', error);
  // エラー時の処理
}
```

**レビュー依頼**:
```
💬 「このコードにエラーハンドリングを追加してください」
```

---

## 💼 実務での活用パターン

### ケース1: 副業案件の品質チェック

```
状況: クライアントに納品する前

手順:
1. 自分でコードを書く
2. Claude Codeに全体レビュー依頼
3. 指摘された箇所を修正
4. 再レビュー → OKなら納品

効果:
- バグが減る
- クライアント満足度向上
- リピート案件につながる
```

### ケース2: 技術面接の準備

```
状況: ポートフォリオを面接官に見せる

手順:
1. 自分の作品をClaude Codeでレビュー
2. 指摘された部分を改善
3. 「なぜこう書いたか」説明を準備

効果:
- 面接で自信を持って説明できる
- 技術的な質問に的確に答えられる
- 採用率アップ
```

### ケース3: チーム開発での事前チェック

```
状況: Pull Requestを出す前

手順:
1. 自分のコードをAIレビュー
2. 明らかな問題を事前に修正
3. 人間のレビュアーへ提出

効果:
- レビュー指摘が減る
- レビュー時間短縮
- チーム全体の生産性向上
```

---

## 🚫 AIレビューの限界

### できること
- ✅ コードの構造分析
- ✅ ベストプラクティスとの比較
- ✅ 一般的な脆弱性の検出
- ✅ 可読性の改善提案

### できないこと
- ❌ ビジネスロジックの正しさ判定
- ❌ プロジェクト固有のルール判定
- ❌ 実際の動作確認
- ❌ チーム方針との整合性確認

### 併用のススメ

```
AIレビュー（即座に）
    ↓
自分で修正
    ↓
人間レビュー（最終確認）
```

**効果**:
- AIで基本的な問題を潰す
- 人間は高度な判断に集中
- レビュー時間が大幅短縮

---

## 📈 レビューで成長する

### レビュー結果を記録

```markdown
# レビュー学習ノート

## 2025/01/15
指摘: innerHTML使用でXSS脆弱性
学び: textContentを使うべき
今後: ユーザー入力は必ずエスケープ

## 2025/01/16
指摘: ループ内でDOM操作が遅い
学び: DocumentFragmentを使う
今後: DOM操作は最小限にまとめる
```

### パターンを蓄積

よくある指摘をテンプレート化:
```
私の弱点チェックリスト:
□ XSS対策はOK？
□ エラーハンドリングは十分？
□ 変数名は明確？
□ コメントは適切？
```

---

## ✅ この章のまとめ

- **AIレビューの強み**: 即座、網羅的、教育的
- **効果的な依頼**: 観点を明確に、段階的に
- **実務活用**: 納品前、面接準備、チーム開発
- **限界を理解**: 最終的には人間の判断が必要

---

## 🔗 次のステップ

次は **8章: コードを改善する** で、実際にレビューを受けて改善する実践をします！
